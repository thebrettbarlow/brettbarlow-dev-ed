name: 'Install SFDX'
description: 'Installs and caches SFDX'

runs:
  using: 'composite'
  steps:
    - name: Cache SFDX
      id: cache-sfdx
      uses: actions/cache@v3
      with:
        path: sfdx
        key: sfdx

    - name: Install SFDX
      if: steps.cache-sfdx.outputs.cache-hit != 'true'
      run: |
        npm install sfdx-cli --global
        npm install @salesforce/cli --global
        sfdx --version
      shell: bash
# wget https://developer.salesforce.com/media/salesforce-cli/sfdx/channels/stable/sfdx-linux-x64.tar.xz
# mkdir sfdx
# tar xJf sfdx-linux-x64.tar.xz -C sfdx --strip-components 1
# echo "$HOME/sfdx/bin" >> $GITHUB_PATH
# sfdx/bin/sfdx version
