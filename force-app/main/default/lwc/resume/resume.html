<template>
  <!-- TODO: Spinner shows over the error.
        Consider making a utility component that handles this.-->
  <template if:false={resume.data}>
    <lightning-spinner
      alternative-text="Loading"
      variant="brand"
      size="medium"
    ></lightning-spinner>
  </template>
  <template if:true={resume.error}>{resume.error}</template>
  <template if:true={resume.data}>
    <div class="slds-grid slds-grid_align-center">
      <div
        class="slds-size_1-of-1 slds-medium-size_4-of-5 slds-large-size_2-of-3"
      >
        <h1
          class="
            slds-text-heading_large
            slds-text-align_center
            slds-var-p-bottom_medium
            resume-title
          "
        >
          {title}
        </h1>
        <div class="slds-grid slds-grid_align-space slds-wrap">
          <div class="slds-col slds-var-p-bottom_medium">
            <c-resume-contact-card
              headshot={headshot}
              name={name}
              location={location}
              email={email}
              phone={phone}
            ></c-resume-contact-card>
          </div>

          <div class="slds-col slds-var-p-bottom_medium">
            <c-resume-links
              linkedin={linkedin}
              github={github}
              trailhead={trailhead}
              website={website}
            ></c-resume-links>
          </div>
        </div>

        <div class="slds-grid slds-grid_align-center">
          <c-salesforce-certifications
            certifications={certifications}
          ></c-salesforce-certifications>
        </div>

        <div class="slds-grid slds-grid_align-center slds-var-p-top_medium">
          <lightning-formatted-rich-text
            value={summary}
          ></lightning-formatted-rich-text>
        </div>

        <div class="slds-var-p-top_medium">
          <template if:true={skills.error}>{skills.error}</template>
          <c-resume-skills skills={skills.data}></c-resume-skills>
        </div>

        <template if:true={jobEntryIds.error}>{jobEntryIds.error}</template>
        <template if:true={jobEntryIds.data}>
          <h2 class="slds-text-heading_medium slds-var-p-top_medium">
            Professional Experience
          </h2>
        </template>
        <template
          if:true={jobEntryIds.data}
          for:each={jobEntryIds.data}
          for:item="jobEntryId"
        >
          <div class="slds-var-p-top_large" key={jobEntryId}>
            <c-resume-entry record-id={jobEntryId}></c-resume-entry>
          </div>
        </template>

        <template if:true={educationEntryIds.error}
          >{educationEntryIds.error}</template
        >
        <template if:true={educationEntryIds.data}>
          <h2 class="slds-text-heading_medium slds-var-p-top_medium">
            Education
          </h2>
        </template>
        <template
          if:true={educationEntryIds.data}
          for:each={educationEntryIds.data}
          for:item="educationEntryId"
        >
          <div class="slds-var-p-top_large" key={educationEntryId}>
            <c-resume-entry record-id={educationEntryId}></c-resume-entry>
          </div>
        </template>
      </div>
    </div>
  </template>
</template>
